$(document).ready(function(){var e={global:{init:function(){$("body").hasClass("home")&&e.home.init(),$("body").hasClass("email-builder")&&e.emailBuilder.init(),$("body").hasClass("banner-tester")&&e.bannerTester.init()},sendToApi:function(e,n,t){$.ajax({method:"POST",url:"/api",dataType:"json",data:{key:"1",action:e,data:n}}).success(function(e){"function"==typeof t&&t(e)})}},home:{init:function(){}},emailBuilder:{init:function(){}},bannerTester:{init:function(){e.bannerTester.setListeners()},setListeners:function(){$(document).on("click","#settings",function(){$("#settings-overlay").fadeIn()}),$(document).on("click","#close-settings",function(){e.bannerTester.buildIframes(),$("#settings-overlay").fadeOut()}),$(document).on("click","#shuffle",function(){e.bannerTester.buildIframes()}),$(document).on("click","#refresh",function(){$("iframe").each(function(e,n){$(n).attr("src",function(e,n){return n})})}),$(document).on("change",".size-selection",function(){$(this).parents(".form-group").find("input").attr("name",this.value)}),$(document).on("click","#add-field",function(){e.bannerTester.addField()}),$(document).on("click","#remove-field",function(){$(this).parents(".form-group").remove()})},addField:function(){var e="";e+='<div class="form-group">',e+='<div class="col-sm-2">',e+='<select class="form-control size-selection">',e+='<option value="">Select Size...</option>',e+='<option value="160x600">160 x 600</option>',e+='<option value="180x150">180 x 150</option>',e+='<option value="300x250">300 x 250</option>',e+='<option value="300x600">300 x 600</option>',e+='<option value="640x480">640 x 480</option>',e+='<option value="728x90">728 x 90</option>',e+='<option value="970x90">970 x 90</option>',e+="</select>",e+="</div>",e+='<div class="col-sm-8">',e+='<input class="form-control iframe-input" type="text" name=""/>',e+="</div>",e+='<div class="col-sm-2">',e+='<button id="remove-field" class="btn btn-danger btn-block pull-right"><i class="fa fa-close"></i> Remove</button>',e+="</div>",e+="</div>",$("#banner-form").append(e)},buildIframes:function(){$("#insert-iframes").html(""),$("#banner-form input[type=text]").each(function(){if(""!==this.value){var n=this.name.split("x"),t=n[0],i=n[1],o=this.value;e.global.sendToApi("get-lorem",{w:t,h:i,url:o},e.bannerTester.getLoremCallback)}})},getLoremCallback:function(e){var n="";n+='<div class="row">',n+='<div class="col-sm-12">';var t="pull-left";Math.random()>=.5&&(t="pull-right"),n+='<iframe class="'+t+'" width="'+e.w+'" height="'+e.h+'" src="'+e.url+'"></iframe>',n+=e.lorem,n+="</div>",n+="</div>",$("#insert-iframes").append(n)}}};e.global.init()});